
# 🧩 Viecom Admin Dashboard PRD

## 📘 文档信息
| 项目 | 内容 |
|------|------|
| 产品名称 | Viecom Admin Dashboard |
| 文档版本 | v1.0 |
| 编写时间 | 2025-11-12 |
| 编写人 | ChatGPT（根据用户需求生成） |
| 数据库 | **Neon (PostgreSQL)** |
| 前端框架 | React + TailwindCSS + Recharts |
| 部署方式 | Web 应用，可嵌入 Neon 后端 |

---

## 🎯 一、产品目标
Viecom Admin Dashboard 是一个供管理员使用的可视化后台，用于：
- 实时查看平台用户注册数据；
- 分析订阅和支付趋势；
- 追踪积分（图像与视频积分）使用情况；
- 支持导出数据（CSV格式）；
- 提供登录保护机制，仅管理员可访问。

目标是让团队快速掌握业务关键指标（注册、订阅、收入、积分消耗），辅助产品决策与用户运营。

---

## 🧭 二、主要功能模块

### 1. 登录管理
| 功能项 | 描述 |
|---------|------|
| 管理员登录 | 支持通过邮箱 + 密码登录 |
| 记住我 | 登录状态持久化 |
| 登录验证 | Neon 数据库 `admins` 表验证 |
| 登录状态保持 | 通过 JWT 或 Session Token |

### 2. 仪表盘 Dashboard
| 功能项 | 描述 |
|---------|------|
| 新注册用户数 | 显示当日注册量、近7日、近30日趋势 |
| 订阅用户数 | 显示当前活跃订阅数 |
| 今日收入 | 显示当日支付总额 |
| 图像积分消耗 | 当日图像生成积分 |
| 视频积分消耗 | 当日视频生成积分 |
| 趋势图 | 折线图（注册趋势 + 积分趋势） |
| 数据导出 | 支持导出CSV文件 |

### 3. 用户管理
| 功能项 | 描述 |
|---------|------|
| 用户列表 | 邮箱、注册日期、订阅计划、积分明细 |
| 搜索 | 支持邮箱关键字搜索 |
| 用户详情页 | 查看单用户注册时间、订阅、支付、积分历史 |
| 数据导出 | 用户数据导出为CSV |

### 4. 订阅与支付模块
| 功能项 | 描述 |
|---------|------|
| 订阅计划统计 | Basic / Pro / Pro+ 用户数 |
| 支付明细 | 展示近30日支付趋势与收入 |
| 支付记录 | 用户支付流水明细（金额、时间、来源） |
| 数据导出 | 支持支付数据导出CSV |

### 5. 积分管理模块
| 功能项 | 描述 |
|---------|------|
| 积分汇总 | 展示总消耗、图像积分、视频积分 |
| 用户积分TOP10 | 显示消耗最多的前10位用户 |
| 积分趋势 | 柱状图展示每日积分消耗（堆叠图） |
| 积分明细表 | 每个用户的图像/视频积分与剩余积分 |
| 数据导出 | 支持积分数据导出CSV |

---

## 🗄️ 三、数据库结构（Neon）

### 表1：`admins`
| 字段 | 类型 | 描述 |
|------|------|------|
| id | UUID | 管理员ID |
| email | TEXT | 管理员邮箱 |
| password_hash | TEXT | 加密后的密码 |
| created_at | TIMESTAMP | 创建时间 |

### 表2：`users`
| 字段 | 类型 | 描述 |
|------|------|------|
| id | UUID | 用户唯一ID |
| email | TEXT | 用户邮箱 |
| signup_date | DATE | 注册日期 |
| plan | TEXT | 订阅计划（Free, Basic, Pro, Pro+） |
| last_active | TIMESTAMP | 最后活跃时间 |

### 表3：`subscriptions`
| 字段 | 类型 | 描述 |
|------|------|------|
| id | UUID | 订阅ID |
| user_id | UUID | 用户ID（外键） |
| plan | TEXT | 当前计划 |
| start_date | DATE | 启用日期 |
| end_date | DATE | 到期日期 |
| status | TEXT | active / canceled / expired |

### 表4：`payments`
| 字段 | 类型 | 描述 |
|------|------|------|
| id | UUID | 支付ID |
| user_id | UUID | 用户ID（外键） |
| amount | NUMERIC | 支付金额（USD） |
| currency | TEXT | 货币 |
| payment_date | TIMESTAMP | 支付时间 |

### 表5：`credits`
| 字段 | 类型 | 描述 |
|------|------|------|
| id | UUID | 积分记录ID |
| user_id | UUID | 用户ID |
| type | TEXT | image / video |
| consumed | INTEGER | 消耗积分 |
| remaining | INTEGER | 剩余积分 |
| date | DATE | 消耗日期 |

---

## 📊 四、关键指标（KPI）

| 指标名称 | 说明 |
|----------|------|
| DAU / 新注册数 | 每日新增注册量 |
| 订阅增长率 | 近7日/30日新增订阅数 |
| 支付金额 | 每日/每周总支付金额 |
| 图像积分消耗 | 每日图像积分总消耗 |
| 视频积分消耗 | 每日视频积分总消耗 |
| 用户留存率 | 基于活跃时间计算（TBD） |

---

## ⚙️ 五、技术实现

### 前端
- **框架**：React 18 + TailwindCSS + Recharts
- **状态管理**：useState + useEffect
- **数据可视化**：Recharts（折线图、堆叠图）
- **文件导出**：Blob + CSV download
- **登录鉴权**：JWT 或 localStorage 模拟（开发阶段）

### 后端
- **数据库**：Neon（PostgreSQL）
- **API框架**：Node.js + Express / Supabase API
- **接口格式**：
  - `/api/auth/login`
  - `/api/users?range=7d`
  - `/api/subscriptions`
  - `/api/payments`
  - `/api/credits/summary`

---

## 🧱 六、权限与安全
| 项目 | 说明 |
|------|------|
| 登录验证 | Neon 数据库验证管理员身份 |
| Token 有效期 | 默认 7 天，可刷新 |
| 权限分级 | 仅管理员可访问仪表盘模块 |
| HTTPS | 强制使用 HTTPS 访问 |
| SQL 防注入 | 使用参数化查询与 Neon SDK |

---

## 🧩 七、版本规划
| 阶段 | 功能范围 | 目标时间 |
|------|------------|----------|
| v1.0 | 登录 + 仪表盘 + 积分统计 + 数据导出 | 2025 Q4 |
| v1.1 | 用户详情页 + 实时数据刷新 | 2026 Q1 |
| v1.2 | 支付统计优化 + 留存分析 | 2026 Q2 |

---

## 🔍 八、未来优化方向
- 实时订阅数据；
- 增加 AI 趋势分析模块；
- 支持自定义报表导出；
- 支持多管理员角色权限。
